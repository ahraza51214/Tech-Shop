// Function to populate laptop selection dropdown
function populateLaptopDropdown() {

    // Dummy laptop data
    const laptops=[ {
        id: 1,
            title: 'Classic Notebook',
            description: 'A little old, but turns on.',
            price: 200,
            image: 'https://hickory-quilled-actress.glitch.me/assets/images/1.png',
    }

    ,
    // Add more laptop data here...
    ];

    laptops.forEach((laptop)=> {
            const option=document.createElement('option');
            option.value=laptop.id;
            option.text=laptop.title;
            laptopSelect.appendChild(option);
        });
}

// Function to update laptop information
function updateLaptopInfo(selectedLaptop) {
    // Update laptop information in the laptopInfo div
    laptopInfo.innerHTML=` <p>Name: ${selectedLaptop.title}</p><p>Description: ${selectedLaptop.description}</p><p>Price: $${selectedLaptop.price}</p><img src="${selectedLaptop.image}" alt="Laptop" style="max-width: 100%"><button class="btn btn-primary" id="buy-now-btn">Buy Now</button><p id="buy-status"></p>`;

    const buyNowButton=document.getElementById('buy-now-btn');
    const buyStatus=document.getElementById('buy-status');

    buyNowButton.addEventListener('click', ()=> {
            // TODO: Implement logic for buying a laptop
        });
}

// Event listeners
window.addEventListener('DOMContentLoaded', ()=> {
        populateLaptopDropdown();
    });

laptopSelect.addEventListener('change', ()=> {
        const selectedLaptopId=parseInt(laptopSelect.value);
        const selectedLaptop=laptops.find((laptop)=> laptop.id===selectedLaptopId);

        if (selectedLaptop) {
            updateLaptopInfo(selectedLaptop);
        }
    });

// TODO: Implement logic for getting a loan
getLoanButton.addEventListener('click', ()=> {
        const loanAmount=parseFloat(prompt('Enter loan amount:'));

        if (loanAmount <=0) {
            alert('Invalid loan amount');
            return;
        }

        if (loanAmount > currentBankBalance * 2) {
            alert('Loan amount exceeds double the bank balance');
            return;
        }

        if (currentLoan > 0) {
            alert('You already have a loan to repay');
            return;
        }

        // Deduct the loan amount from the bank balance
        currentBankBalance +=loanAmount;
        currentLoan=loanAmount;
        updateBankBalance();
    });

// TODO: Implement logic for working
workButton.addEventListener('click', ()=> {
        // Add the pay to the currentPay
        currentPay +=100;
        updatePayDisplay();
    });

// TODO: Implement logic for banking
bankButton.addEventListener('click', ()=> {
        // Transfer pay to the bank balance
        const loanRepayment=currentLoan > 0 ? currentPay * 0.1 : 0;
        currentBankBalance +=currentPay - loanRepayment;
        currentPay=0;

        if (loanRepayment > 0) {
            currentLoan -=loanRepayment;
        }

        updateBankBalance();
        updatePayDisplay();
    });

// TODO: Implement logic for repaying loan
repayLoanButton.addEventListener('click', ()=> {
        if (currentLoan <=0) {
            alert('You do not have an outstanding loan to repay');
            return;
        }

        // Repay the loan from the currentPay, and transfer the rest to the bank balance
        const repaymentAmount=Math.min(currentLoan, currentPay);
        currentLoan -=repaymentAmount;
        currentBankBalance +=currentPay - repaymentAmount;
        currentPay=0;

        updateBankBalance();
        updatePayDisplay();
    });

// Helper functions to update UI
function updateBankBalance() {
    bankBalance.textContent=`Balance: $${currentBankBalance.toFixed(2)}`;
}

function updatePayDisplay() {
    const payDisplay=document.querySelector('#work-btn + p');
    payDisplay.textContent=`Pay: $${currentPay}`;
}

// Function to update laptop information
function updateLaptopInfo(selectedLaptop) {
    // ... (existing code)

    buyNowButton.addEventListener('click', ()=> {

            // TODO: Implement logic for buying a laptop
            if (currentBankBalance < selectedLaptop.price) {
                buyStatus.textContent="You cannot afford this laptop.";
                return;
            }

            // Deduct laptop price from bank balance
            currentBankBalance -=selectedLaptop.price;
            buyStatus.textContent=`Congratulations ! You now own a ${selectedLaptop.title} !`;
            updateBankBalance();
        });
}